<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Goal Tracker">
  <meta name="theme-color" content="#FF6B35">
  <meta name="description" content="毎日の目標を達成しよう！">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <title>目標達成トラッカー</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&family=Outfit:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>🎯 Goal Tracker</h1>
      <p>毎日の目標を達成しよう！</p>
      <button class="settings-btn" id="settingsBtn" title="設定">⚙️</button>
    </header>
    <div class="tab-nav">
      <button class="tab-btn active" data-tab="today">今日の記録</button>
      <button class="tab-btn" data-tab="history">履歴一覧</button>
    </div>
    <div class="tab-content active" id="todayTab">
      <div class="date-selector">
        <button class="date-btn" id="prevDay">←</button>
        <div class="current-date" id="currentDate"></div>
        <button class="date-btn" id="nextDay">→</button>
      </div>
      <section class="goals-section">
        <div class="section-title">目標一覧</div>
        <div id="goalsList"></div>
      </section>
    </div>
    <div class="tab-content" id="historyTab">
      <div class="history-controls">
        <select id="historyGoalSelect"><option value="">目標を選択...</option></select>
      </div>
      <div id="historyContent" style="display: none;">
        <div class="view-mode-toggle">
          <button class="view-mode-btn active" data-mode="month">月表示</button>
          <button class="view-mode-btn" data-mode="year">年表示</button>
        </div>
        <div class="period-selector">
          <button class="date-btn" id="prevPeriod">←</button>
          <div class="period-label" id="periodLabel"></div>
          <button class="date-btn" id="nextPeriod">→</button>
        </div>
        <div class="history-stats" id="historyStats"></div>
        <div id="calendarView"></div>
      </div>
      <div id="historyEmpty" class="empty-state">
        <div class="icon">📊</div>
        <p>上から目標を選んでね</p>
        <p>履歴が表示されるよ！</p>
      </div>
    </div>
  </div>
  <button class="add-goal-btn" id="addGoalBtn">+</button>
  <div class="install-banner" id="installBanner">
    <div class="install-banner-text">
      <strong>アプリをインストール</strong>
      <small>ホーム画面に追加して使おう</small>
    </div>
    <button class="install-btn" id="installBtn">追加</button>
    <button class="install-close" id="installClose">×</button>
  </div>
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <h2 id="modalTitle">新しい目標を追加</h2>
      <form id="goalForm">
        <div class="form-group">
          <label>目標名</label>
          <input type="text" id="goalName" placeholder="例：プログラミングの勉強" required>
        </div>
        <div class="form-group">
          <label>タイプ</label>
          <div class="type-selector">
            <div class="type-option selected" data-type="time">
              <div class="icon">⏱️</div>
              <div class="label">時間を記録</div>
            </div>
            <div class="type-option" data-type="boolean">
              <div class="icon">✅</div>
              <div class="label">やった/やらない</div>
            </div>
          </div>
        </div>
        <div class="form-group" id="targetTimeGroup">
          <label>目標時間（分）</label>
          <input type="number" id="targetTime" placeholder="例：30" min="1">
        </div>
        <div class="modal-buttons">
          <button type="button" class="modal-btn cancel" id="cancelBtn">キャンセル</button>
          <button type="submit" class="modal-btn submit" id="submitBtn">追加</button>
        </div>
      </form>
    </div>
  </div>
  <div class="modal-overlay" id="settingsOverlay">
    <div class="modal">
      <h2>⚙️ 設定</h2>
      <div class="settings-section">
        <div class="settings-section-title">データ管理</div>
        <div class="settings-item">
          <div class="settings-item-header">
            <span class="settings-item-icon">📤</span>
            <span class="settings-item-title">エクスポート</span>
          </div>
          <p class="settings-item-desc">すべての目標と記録をファイルに保存します。機種変更やバックアップに使えます。</p>
          <button class="settings-item-btn primary" id="exportBtn">データをダウンロード</button>
        </div>
        <div class="settings-item">
          <div class="settings-item-header">
            <span class="settings-item-icon">📥</span>
            <span class="settings-item-title">インポート</span>
          </div>
          <p class="settings-item-desc">エクスポートしたファイルからデータを復元します。現在のデータは上書きされます。</p>
          <button class="settings-item-btn secondary" id="importBtn">ファイルを選択</button>
          <input type="file" id="importFile" class="hidden-input" accept=".json">
        </div>
        <div class="settings-item">
          <div class="settings-item-header">
            <span class="settings-item-icon">🗑️</span>
            <span class="settings-item-title">データ削除</span>
          </div>
          <p class="settings-item-desc">すべてのデータを削除します。この操作は取り消せません。</p>
          <button class="settings-item-btn danger" id="deleteAllBtn">すべて削除</button>
        </div>
      </div>
      <div class="modal-buttons">
        <button type="button" class="modal-btn cancel" id="settingsCloseBtn">閉じる</button>
      </div>
    </div>
  </div>
  <div class="toast" id="toast"></div>
  <script src="app.js"></script>
</body>
</html>
